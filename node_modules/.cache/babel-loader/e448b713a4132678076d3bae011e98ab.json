{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PolygonMaskType_1 = require(\"../Enums/PolygonMaskType\");\n\nvar Particle_1 = require(\"./Particle\");\n\nvar PolygonMaskInlineArrangement_1 = require(\"../Enums/PolygonMaskInlineArrangement\");\n\nvar Utils_1 = require(\"./Utils/Utils\");\n\nvar PolygonMask = function () {\n  function PolygonMask(container) {\n    this.container = container;\n    this.dimension = {\n      height: 0,\n      width: 0\n    };\n    this.polygonPathLength = 0;\n    this.path2DSupported = window.hasOwnProperty(\"Path2D\");\n  }\n\n  PolygonMask.prototype.checkInsidePolygon = function (position) {\n    var container = this.container;\n    var options = container.options;\n\n    if (!options.polygon.enable || options.polygon.type === PolygonMaskType_1.PolygonMaskType.none || options.polygon.type === PolygonMaskType_1.PolygonMaskType.inline) {\n      return true;\n    }\n\n    if (!this.raw) {\n      console.error('No polygon found, you need to specify SVG url in config.');\n      return true;\n    }\n\n    var x = position ? position.x : Math.random() * container.canvas.dimension.width;\n    var y = position ? position.y : Math.random() * container.canvas.dimension.height;\n    var inside = false;\n\n    for (var i = 0, j = this.raw.length - 1; i < this.raw.length; j = i++) {\n      var xi = this.raw[i].x;\n      var yi = this.raw[i].y;\n      var xj = this.raw[j].x;\n      var yj = this.raw[j].y;\n      var intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n\n    if (options.polygon.type === PolygonMaskType_1.PolygonMaskType.inside) {\n      return inside;\n    } else if (options.polygon.type === PolygonMaskType_1.PolygonMaskType.outside) {\n      return !inside;\n    }\n\n    return false;\n  };\n\n  PolygonMask.prototype.redraw = function () {\n    var _this = this;\n\n    var container = this.container;\n    var options = container.options;\n\n    if (options.polygon.enable && options.polygon.type !== PolygonMaskType_1.PolygonMaskType.none) {\n      if (this.redrawTimeout) {\n        clearTimeout(this.redrawTimeout);\n      }\n\n      this.redrawTimeout = setTimeout(function () {\n        _this.parseSvgPathToPolygon().then(function (data) {\n          _this.raw = data;\n\n          _this.createPath2D();\n\n          container.particles.redraw();\n        });\n      }, 250);\n    }\n  };\n\n  PolygonMask.prototype.init = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var container, options, _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            container = this.container;\n            options = container.options;\n            if (!(options.polygon.enable && options.polygon.url)) return [3, 2];\n            _a = this;\n            return [4, this.parseSvgPathToPolygon(options.polygon.url)];\n\n          case 1:\n            _a.raw = _b.sent();\n            this.createPath2D();\n            _b.label = 2;\n\n          case 2:\n            return [2];\n        }\n      });\n    });\n  };\n\n  PolygonMask.prototype.reset = function () {\n    delete this.raw;\n    delete this.path;\n    delete this.svg;\n  };\n\n  PolygonMask.prototype.randomPointInPolygon = function () {\n    var container = this.container;\n    var options = container.options;\n    var position;\n\n    if (options.polygon.type === PolygonMaskType_1.PolygonMaskType.inline) {\n      switch (options.polygon.inline.arrangement) {\n        case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.randomPoint:\n          position = this.getRandomPointOnPolygonPath();\n          break;\n\n        case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.randomLength:\n          position = this.getRandomPointOnPolygonPathByLength();\n          break;\n\n        case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.equidistant:\n          position = this.getEquidistantPointOnPolygonPathByIndex(container.particles.count);\n          break;\n\n        case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.onePerPoint:\n        case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.perPoint:\n        default:\n          position = this.getPoingOnPolygonPathByIndex(container.particles.count);\n      }\n    } else {\n      position = {\n        x: Math.random() * container.canvas.dimension.width,\n        y: Math.random() * container.canvas.dimension.height\n      };\n    }\n\n    if (this.checkInsidePolygon(position)) {\n      return position;\n    } else {\n      return this.randomPointInPolygon();\n    }\n  };\n\n  PolygonMask.prototype.parseSvgPathToPolygon = function (svgUrl) {\n    return __awaiter(this, void 0, void 0, function () {\n      var container, options, url, req, xml, parser, doc, scale, len, polygonRaw, p, i, segment, absSeg, relSeg;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            container = this.container;\n            options = container.options;\n            url = svgUrl || options.polygon.url;\n            if (!(!this.path || !this.svg)) return [3, 4];\n            return [4, fetch(url)];\n\n          case 1:\n            req = _a.sent();\n            if (!req.ok) return [3, 3];\n            return [4, req.text()];\n\n          case 2:\n            xml = _a.sent();\n            parser = new DOMParser();\n            doc = parser.parseFromString(xml, \"image/svg+xml\");\n            this.svg = doc.getElementsByTagName(\"svg\")[0];\n            this.path = doc.getElementsByTagName(\"path\")[0];\n\n            if (this.path) {\n              this.polygonPathLength = this.path.getTotalLength();\n            }\n\n            return [3, 4];\n\n          case 3:\n            console.error(\"tsParticles Error - during polygon mask download\");\n            return [2];\n\n          case 4:\n            scale = options.polygon.scale;\n            this.dimension.width = parseFloat(this.svg.getAttribute(\"width\") || \"0\") * scale;\n            this.dimension.height = parseFloat(this.svg.getAttribute(\"height\") || \"0\") * scale;\n            this.offset = {\n              x: container.canvas.dimension.width / 2 - this.dimension.width / 2,\n              y: container.canvas.dimension.height / 2 - this.dimension.height / 2\n            };\n            len = this.path.pathSegList.numberOfItems;\n            polygonRaw = [];\n            p = {\n              x: 0,\n              y: 0\n            };\n\n            for (i = 0; i < len; i++) {\n              segment = this.path.pathSegList.getItem(i);\n\n              switch (segment.pathSegType) {\n                case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\n                case window.SVGPathSeg.PATHSEG_LINETO_ABS:\n                case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n                case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n                case window.SVGPathSeg.PATHSEG_ARC_ABS:\n                case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n                case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n                  absSeg = segment;\n                  p.x = absSeg.x;\n                  p.y = absSeg.y;\n                  break;\n\n                case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n                  p.x = segment.x;\n                  break;\n\n                case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n                  p.y = segment.y;\n                  break;\n\n                case window.SVGPathSeg.PATHSEG_LINETO_REL:\n                case window.SVGPathSeg.PATHSEG_MOVETO_REL:\n                case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n                case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n                case window.SVGPathSeg.PATHSEG_ARC_REL:\n                case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n                case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n                  relSeg = segment;\n                  p.x += relSeg.x;\n                  p.y += relSeg.y;\n                  break;\n\n                case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n                  p.x += segment.x;\n                  break;\n\n                case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n                  p.y += segment.y;\n                  break;\n\n                case window.SVGPathSeg.PATHSEG_UNKNOWN:\n                case window.SVGPathSeg.PATHSEG_CLOSEPATH:\n                  continue;\n              }\n\n              polygonRaw.push({\n                x: p.x * scale + this.offset.x,\n                y: p.y * scale + this.offset.y\n              });\n            }\n\n            return [2, polygonRaw];\n        }\n      });\n    });\n  };\n\n  PolygonMask.prototype.drawPolygon = function () {\n    var container = this.container;\n    container.canvas.drawPolygonMask();\n  };\n\n  PolygonMask.prototype.drawPointsOnPolygonPath = function () {\n    var container = this.container;\n\n    if (this.raw) {\n      for (var _i = 0, _a = this.raw; _i < _a.length; _i++) {\n        var item = _a[_i];\n        var position = {\n          x: item.x,\n          y: item.y\n        };\n        container.particles.addParticle(new Particle_1.Particle(container, position));\n      }\n    }\n  };\n\n  PolygonMask.prototype.getRandomPointOnPolygonPath = function () {\n    if (!this.raw || !this.raw.length) throw new Error(\"No polygon data loaded.\");\n    var coords = Utils_1.Utils.itemFromArray(this.raw);\n    return {\n      x: coords.x,\n      y: coords.y\n    };\n  };\n\n  PolygonMask.prototype.getRandomPointOnPolygonPathByLength = function () {\n    var _a, _b;\n\n    var container = this.container;\n    var options = container.options;\n    if (!this.raw || !this.raw.length || !this.path) throw new Error(\"No polygon data loaded.\");\n    var distance = Math.floor(Math.random() * this.polygonPathLength) + 1;\n    var point = this.path.getPointAtLength(distance);\n    return {\n      x: point.x * options.polygon.scale + (((_a = this.offset) === null || _a === void 0 ? void 0 : _a.x) || 0),\n      y: point.y * options.polygon.scale + (((_b = this.offset) === null || _b === void 0 ? void 0 : _b.y) || 0)\n    };\n  };\n\n  PolygonMask.prototype.getEquidistantPointOnPolygonPathByIndex = function (index) {\n    var _a, _b;\n\n    var container = this.container;\n    var options = container.options;\n    if (!this.raw || !this.raw.length || !this.path) throw new Error(\"No polygon data loaded.\");\n    var distance = this.polygonPathLength / options.particles.number.value * index;\n    var point = this.path.getPointAtLength(distance);\n    return {\n      x: point.x * options.polygon.scale + (((_a = this.offset) === null || _a === void 0 ? void 0 : _a.x) || 0),\n      y: point.y * options.polygon.scale + (((_b = this.offset) === null || _b === void 0 ? void 0 : _b.y) || 0)\n    };\n  };\n\n  PolygonMask.prototype.getPoingOnPolygonPathByIndex = function (index) {\n    if (!this.raw || !this.raw.length) throw new Error(\"No polygon data loaded.\");\n    var coords = this.raw[index % this.raw.length];\n    return {\n      x: coords.x,\n      y: coords.y\n    };\n  };\n\n  PolygonMask.prototype.createPath2D = function () {\n    var _this = this;\n\n    var _a;\n\n    if (!this.path2DSupported) {\n      return;\n    }\n\n    var pathData = (_a = this.path) === null || _a === void 0 ? void 0 : _a.getAttribute(\"d\");\n\n    if (pathData) {\n      var path = new Path2D(pathData);\n      var matrix = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\").createSVGMatrix();\n      var finalPath = new Path2D();\n      var transform = matrix.scale(this.container.options.polygon.scale);\n\n      if (finalPath.addPath) {\n        finalPath.addPath(path, transform);\n        this.polygonPath = finalPath;\n      } else {\n        delete this.polygonPath;\n      }\n    } else {\n      delete this.polygonPath;\n    }\n\n    if (!this.polygonPath && this.raw) {\n      this.polygonPath = new Path2D();\n      this.polygonPath.moveTo(this.raw[0].x, this.raw[0].y);\n      this.raw.forEach(function (pos, i) {\n        var _a;\n\n        if (i > 0) {\n          (_a = _this.polygonPath) === null || _a === void 0 ? void 0 : _a.lineTo(pos.x, pos.y);\n        }\n      });\n      this.polygonPath.closePath();\n    }\n  };\n\n  return PolygonMask;\n}();\n\nexports.PolygonMask = PolygonMask;","map":{"version":3,"sources":["C:/Users/Sheetal/Desktop/Front-end/node_modules/tsparticles/dist/Classes/PolygonMask.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","PolygonMaskType_1","require","Particle_1","PolygonMaskInlineArrangement_1","Utils_1","PolygonMask","container","dimension","height","width","polygonPathLength","path2DSupported","window","hasOwnProperty","prototype","checkInsidePolygon","position","options","polygon","enable","type","PolygonMaskType","none","inline","raw","console","error","x","Math","random","canvas","inside","i","j","xi","yi","xj","yj","intersect","outside","redraw","_this","redrawTimeout","clearTimeout","setTimeout","parseSvgPathToPolygon","data","createPath2D","particles","init","_a","_b","url","reset","path","svg","randomPointInPolygon","arrangement","PolygonMaskInlineArrangement","randomPoint","getRandomPointOnPolygonPath","randomLength","getRandomPointOnPolygonPathByLength","equidistant","getEquidistantPointOnPolygonPathByIndex","count","onePerPoint","perPoint","getPoingOnPolygonPathByIndex","svgUrl","req","xml","parser","doc","scale","len","polygonRaw","p","segment","absSeg","relSeg","fetch","ok","text","DOMParser","parseFromString","getElementsByTagName","getTotalLength","parseFloat","getAttribute","offset","pathSegList","numberOfItems","getItem","pathSegType","SVGPathSeg","PATHSEG_MOVETO_ABS","PATHSEG_LINETO_ABS","PATHSEG_CURVETO_CUBIC_ABS","PATHSEG_CURVETO_QUADRATIC_ABS","PATHSEG_ARC_ABS","PATHSEG_CURVETO_CUBIC_SMOOTH_ABS","PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS","PATHSEG_LINETO_HORIZONTAL_ABS","PATHSEG_LINETO_VERTICAL_ABS","PATHSEG_LINETO_REL","PATHSEG_MOVETO_REL","PATHSEG_CURVETO_CUBIC_REL","PATHSEG_CURVETO_QUADRATIC_REL","PATHSEG_ARC_REL","PATHSEG_CURVETO_CUBIC_SMOOTH_REL","PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL","PATHSEG_LINETO_HORIZONTAL_REL","PATHSEG_LINETO_VERTICAL_REL","PATHSEG_UNKNOWN","PATHSEG_CLOSEPATH","drawPolygon","drawPolygonMask","drawPointsOnPolygonPath","_i","item","addParticle","Particle","Error","coords","Utils","itemFromArray","distance","floor","point","getPointAtLength","index","number","pathData","Path2D","matrix","document","createElementNS","createSVGMatrix","finalPath","transform","addPath","polygonPath","moveTo","forEach","pos","lineTo","closePath"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PolygonMaskType_1 = require(\"../Enums/PolygonMaskType\");\nvar Particle_1 = require(\"./Particle\");\nvar PolygonMaskInlineArrangement_1 = require(\"../Enums/PolygonMaskInlineArrangement\");\nvar Utils_1 = require(\"./Utils/Utils\");\nvar PolygonMask = (function () {\n    function PolygonMask(container) {\n        this.container = container;\n        this.dimension = {\n            height: 0,\n            width: 0\n        };\n        this.polygonPathLength = 0;\n        this.path2DSupported = window.hasOwnProperty(\"Path2D\");\n    }\n    PolygonMask.prototype.checkInsidePolygon = function (position) {\n        var container = this.container;\n        var options = container.options;\n        if (!options.polygon.enable ||\n            options.polygon.type === PolygonMaskType_1.PolygonMaskType.none ||\n            options.polygon.type === PolygonMaskType_1.PolygonMaskType.inline) {\n            return true;\n        }\n        if (!this.raw) {\n            console.error('No polygon found, you need to specify SVG url in config.');\n            return true;\n        }\n        var x = position ? position.x : Math.random() * container.canvas.dimension.width;\n        var y = position ? position.y : Math.random() * container.canvas.dimension.height;\n        var inside = false;\n        for (var i = 0, j = this.raw.length - 1; i < this.raw.length; j = i++) {\n            var xi = this.raw[i].x;\n            var yi = this.raw[i].y;\n            var xj = this.raw[j].x;\n            var yj = this.raw[j].y;\n            var intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n            if (intersect) {\n                inside = !inside;\n            }\n        }\n        if (options.polygon.type === PolygonMaskType_1.PolygonMaskType.inside) {\n            return inside;\n        }\n        else if (options.polygon.type === PolygonMaskType_1.PolygonMaskType.outside) {\n            return !inside;\n        }\n        return false;\n    };\n    PolygonMask.prototype.redraw = function () {\n        var _this = this;\n        var container = this.container;\n        var options = container.options;\n        if (options.polygon.enable && options.polygon.type !== PolygonMaskType_1.PolygonMaskType.none) {\n            if (this.redrawTimeout) {\n                clearTimeout(this.redrawTimeout);\n            }\n            this.redrawTimeout = setTimeout(function () {\n                _this.parseSvgPathToPolygon().then(function (data) {\n                    _this.raw = data;\n                    _this.createPath2D();\n                    container.particles.redraw();\n                });\n            }, 250);\n        }\n    };\n    PolygonMask.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var container, options, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        container = this.container;\n                        options = container.options;\n                        if (!(options.polygon.enable && options.polygon.url)) return [3, 2];\n                        _a = this;\n                        return [4, this.parseSvgPathToPolygon(options.polygon.url)];\n                    case 1:\n                        _a.raw = _b.sent();\n                        this.createPath2D();\n                        _b.label = 2;\n                    case 2: return [2];\n                }\n            });\n        });\n    };\n    PolygonMask.prototype.reset = function () {\n        delete this.raw;\n        delete this.path;\n        delete this.svg;\n    };\n    PolygonMask.prototype.randomPointInPolygon = function () {\n        var container = this.container;\n        var options = container.options;\n        var position;\n        if (options.polygon.type === PolygonMaskType_1.PolygonMaskType.inline) {\n            switch (options.polygon.inline.arrangement) {\n                case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.randomPoint:\n                    position = this.getRandomPointOnPolygonPath();\n                    break;\n                case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.randomLength:\n                    position = this.getRandomPointOnPolygonPathByLength();\n                    break;\n                case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.equidistant:\n                    position = this.getEquidistantPointOnPolygonPathByIndex(container.particles.count);\n                    break;\n                case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.onePerPoint:\n                case PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.perPoint:\n                default:\n                    position = this.getPoingOnPolygonPathByIndex(container.particles.count);\n            }\n        }\n        else {\n            position = {\n                x: Math.random() * container.canvas.dimension.width,\n                y: Math.random() * container.canvas.dimension.height,\n            };\n        }\n        if (this.checkInsidePolygon(position)) {\n            return position;\n        }\n        else {\n            return this.randomPointInPolygon();\n        }\n    };\n    PolygonMask.prototype.parseSvgPathToPolygon = function (svgUrl) {\n        return __awaiter(this, void 0, void 0, function () {\n            var container, options, url, req, xml, parser, doc, scale, len, polygonRaw, p, i, segment, absSeg, relSeg;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        container = this.container;\n                        options = container.options;\n                        url = svgUrl || options.polygon.url;\n                        if (!(!this.path || !this.svg)) return [3, 4];\n                        return [4, fetch(url)];\n                    case 1:\n                        req = _a.sent();\n                        if (!req.ok) return [3, 3];\n                        return [4, req.text()];\n                    case 2:\n                        xml = _a.sent();\n                        parser = new DOMParser();\n                        doc = parser.parseFromString(xml, \"image/svg+xml\");\n                        this.svg = doc.getElementsByTagName(\"svg\")[0];\n                        this.path = doc.getElementsByTagName(\"path\")[0];\n                        if (this.path) {\n                            this.polygonPathLength = this.path.getTotalLength();\n                        }\n                        return [3, 4];\n                    case 3:\n                        console.error(\"tsParticles Error - during polygon mask download\");\n                        return [2];\n                    case 4:\n                        scale = options.polygon.scale;\n                        this.dimension.width = parseFloat(this.svg.getAttribute(\"width\") || \"0\") * scale;\n                        this.dimension.height = parseFloat(this.svg.getAttribute(\"height\") || \"0\") * scale;\n                        this.offset = {\n                            x: container.canvas.dimension.width / 2 - this.dimension.width / 2,\n                            y: container.canvas.dimension.height / 2 - this.dimension.height / 2,\n                        };\n                        len = this.path.pathSegList.numberOfItems;\n                        polygonRaw = [];\n                        p = {\n                            x: 0,\n                            y: 0,\n                        };\n                        for (i = 0; i < len; i++) {\n                            segment = this.path.pathSegList.getItem(i);\n                            switch (segment.pathSegType) {\n                                case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\n                                case window.SVGPathSeg.PATHSEG_LINETO_ABS:\n                                case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n                                case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n                                case window.SVGPathSeg.PATHSEG_ARC_ABS:\n                                case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n                                case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n                                    absSeg = segment;\n                                    p.x = absSeg.x;\n                                    p.y = absSeg.y;\n                                    break;\n                                case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n                                    p.x = segment.x;\n                                    break;\n                                case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n                                    p.y = segment.y;\n                                    break;\n                                case window.SVGPathSeg.PATHSEG_LINETO_REL:\n                                case window.SVGPathSeg.PATHSEG_MOVETO_REL:\n                                case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n                                case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n                                case window.SVGPathSeg.PATHSEG_ARC_REL:\n                                case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n                                case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n                                    relSeg = segment;\n                                    p.x += relSeg.x;\n                                    p.y += relSeg.y;\n                                    break;\n                                case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n                                    p.x += segment.x;\n                                    break;\n                                case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n                                    p.y += segment.y;\n                                    break;\n                                case window.SVGPathSeg.PATHSEG_UNKNOWN:\n                                case window.SVGPathSeg.PATHSEG_CLOSEPATH:\n                                    continue;\n                            }\n                            polygonRaw.push({\n                                x: p.x * scale + this.offset.x,\n                                y: p.y * scale + this.offset.y,\n                            });\n                        }\n                        return [2, polygonRaw];\n                }\n            });\n        });\n    };\n    PolygonMask.prototype.drawPolygon = function () {\n        var container = this.container;\n        container.canvas.drawPolygonMask();\n    };\n    PolygonMask.prototype.drawPointsOnPolygonPath = function () {\n        var container = this.container;\n        if (this.raw) {\n            for (var _i = 0, _a = this.raw; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var position = {\n                    x: item.x,\n                    y: item.y,\n                };\n                container.particles.addParticle(new Particle_1.Particle(container, position));\n            }\n        }\n    };\n    PolygonMask.prototype.getRandomPointOnPolygonPath = function () {\n        if (!this.raw || !this.raw.length)\n            throw new Error(\"No polygon data loaded.\");\n        var coords = Utils_1.Utils.itemFromArray(this.raw);\n        return {\n            x: coords.x,\n            y: coords.y,\n        };\n    };\n    PolygonMask.prototype.getRandomPointOnPolygonPathByLength = function () {\n        var _a, _b;\n        var container = this.container;\n        var options = container.options;\n        if (!this.raw || !this.raw.length || !this.path)\n            throw new Error(\"No polygon data loaded.\");\n        var distance = Math.floor(Math.random() * this.polygonPathLength) + 1;\n        var point = this.path.getPointAtLength(distance);\n        return {\n            x: point.x * options.polygon.scale + (((_a = this.offset) === null || _a === void 0 ? void 0 : _a.x) || 0),\n            y: point.y * options.polygon.scale + (((_b = this.offset) === null || _b === void 0 ? void 0 : _b.y) || 0),\n        };\n    };\n    PolygonMask.prototype.getEquidistantPointOnPolygonPathByIndex = function (index) {\n        var _a, _b;\n        var container = this.container;\n        var options = container.options;\n        if (!this.raw || !this.raw.length || !this.path)\n            throw new Error(\"No polygon data loaded.\");\n        var distance = (this.polygonPathLength / options.particles.number.value) * index;\n        var point = this.path.getPointAtLength(distance);\n        return {\n            x: point.x * options.polygon.scale + (((_a = this.offset) === null || _a === void 0 ? void 0 : _a.x) || 0),\n            y: point.y * options.polygon.scale + (((_b = this.offset) === null || _b === void 0 ? void 0 : _b.y) || 0),\n        };\n    };\n    PolygonMask.prototype.getPoingOnPolygonPathByIndex = function (index) {\n        if (!this.raw || !this.raw.length)\n            throw new Error(\"No polygon data loaded.\");\n        var coords = this.raw[index % this.raw.length];\n        return {\n            x: coords.x,\n            y: coords.y,\n        };\n    };\n    PolygonMask.prototype.createPath2D = function () {\n        var _this = this;\n        var _a;\n        if (!this.path2DSupported) {\n            return;\n        }\n        var pathData = (_a = this.path) === null || _a === void 0 ? void 0 : _a.getAttribute(\"d\");\n        if (pathData) {\n            var path = new Path2D(pathData);\n            var matrix = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\").createSVGMatrix();\n            var finalPath = new Path2D();\n            var transform = matrix.scale(this.container.options.polygon.scale);\n            if (finalPath.addPath) {\n                finalPath.addPath(path, transform);\n                this.polygonPath = finalPath;\n            }\n            else {\n                delete this.polygonPath;\n            }\n        }\n        else {\n            delete this.polygonPath;\n        }\n        if (!this.polygonPath && this.raw) {\n            this.polygonPath = new Path2D();\n            this.polygonPath.moveTo(this.raw[0].x, this.raw[0].y);\n            this.raw.forEach(function (pos, i) {\n                var _a;\n                if (i > 0) {\n                    (_a = _this.polygonPath) === null || _a === void 0 ? void 0 : _a.lineTo(pos.x, pos.y);\n                }\n            });\n            this.polygonPath.closePath();\n        }\n    };\n    return PolygonMask;\n}());\nexports.PolygonMask = PolygonMask;\n"]},"metadata":{},"sourceType":"script"}